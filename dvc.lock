schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/dataset_v1.csv
      hash: md5
      md5: fa9fe4cf24f70b69ac65fb33062ddf34
      size: 1915795
    - path: src/preprocess.py
      hash: md5
      md5: 560428c8765578a80c8a5777c182d9a2
      size: 874
    params:
      params.yaml:
        preprocess.features:
          numerical:
          - MedInc
          - HouseAge
          - AveRooms
          - AveBedrms
          - Population
          - AveOccup
          - Latitude
          - Longitude
        preprocess.target: MedHouseVal
    outs:
    - path: data/processed_data.csv
      hash: md5
      md5: 1de64d7671b87bc1e3ca60109d50129d
      size: 1910089
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed_data.csv
      hash: md5
      md5: 1de64d7671b87bc1e3ca60109d50129d
      size: 1910089
    - path: src/train.py
      hash: md5
      md5: e261a513deabf6527a73ffd35d13ce45
      size: 1636
    params:
      params.yaml:
        train.hyperparams:
          RandomForest:
            n_estimators: 100
            max_depth: 10
            random_state: 42
          GradientBoosting:
            n_estimators: 100
            learning_rate: 0.1
            random_state: 42
        train.models:
        - LinearRegression
        - RandomForest
        - GradientBoosting
        train.target: MedHouseVal
        train.test_size: 0.2
    outs:
    - path: models/
      hash: md5
      md5: 1475d683a506007597963fdb0ec8e9f9.dir
      size: 10363730
      nfiles: 3
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/processed_data.csv
      hash: md5
      md5: 1de64d7671b87bc1e3ca60109d50129d
      size: 1910089
    - path: models/
      hash: md5
      md5: 1475d683a506007597963fdb0ec8e9f9.dir
      size: 10363730
      nfiles: 3
    - path: src/evaluate.py
      hash: md5
      md5: f4f59eacdb5f63ec417012cbc7d467a8
      size: 1564
    params:
      params.yaml:
        evaluate.metrics:
        - mse
        - r2
        - mae
        train.target: MedHouseVal
    outs:
    - path: metrics.json
      hash: md5
      md5: 2845a0cff01d7687f62637d0836bded1
      size: 558
